@page "/"
@using Services
@inject AuthService AuthService
@inject NavigationManager Navigation

<h1>Welcome to your EVision Admin Dashboard</h1>
<p>This dashboard provides a comprehensive overview of managing electric vehicle operations effectively.</p>

<div class="features">
    <h2>Key Features:</h2>
    <ul>
        <li><strong>Client Management:</strong> Manage client information seamlessly.</li>
        <li><strong>Provider Management:</strong> Oversee service providers effectively.</li>
        <li><strong>Charging Station Monitoring:</strong> Keep track of all charging stations in your network.</li>
        <li><strong>Notifications:</strong> Stay updated with important notifications.</li>
        <li><strong>Subscription Plans:</strong> Manage subscription plans with ease.</li>
        <li><strong>Data Analytics:</strong> Analyze EV usage and trends to optimize operations.</li>
    </ul>
</div>

@if (!_isAdmin)
{
    <div class="login-container">
        <h2>Login to Your Account</h2>
        <button class="btn btn-primary" @onclick="NavigateToLogin">Login</button>
    </div>
}

@code {
    private bool _isAdmin;

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            _isAdmin = await AuthService.IsAdmin();
            StateHasChanged();
        }
    }

    private void NavigateToLogin()
    {
        Navigation.NavigateTo("/login");
    }
}

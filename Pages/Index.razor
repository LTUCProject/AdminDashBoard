@page "/"
@using Services
@inject AuthService AuthService
@inject NavigationManager Navigation

<link href="css/index.css" rel="stylesheet" />

@if (!_isAdmin)
{
    <button class="btn btn-primary" @onclick="NavigateToLogin">Login</button>
}
else
{
    <div class="dashboard-container">
        <header class="dashboard-header">
            <h1>Welcome to your EVision Admin Dashboard</h1>
            <p>Manage electric vehicle operations effectively and efficiently.</p>
        </header>

        <div class="features">
            <h2>Key Features:</h2>
            <ul>
                <li><strong>Client Management:</strong> Manage client information seamlessly.</li>
                <li><strong>Provider Management:</strong> Oversee service providers effectively.</li>
                <li><strong>Charging Station Monitoring:</strong> Keep track of all charging stations in your network.</li>
                <li><strong>Notifications:</strong> Stay updated with important notifications.</li>
                <li><strong>Subscription Plans:</strong> Manage subscription plans with ease.</li>
                <li><strong>Data Analytics:</strong> Analyze EV usage and trends to optimize operations.</li>
            </ul>
        </div>
    </div>
}

@code {
    private bool _isAdmin;

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            _isAdmin = await AuthService.IsAdmin();
            StateHasChanged();
        }
    }

    private void NavigateToLogin()
    {
        Navigation.NavigateTo("/login");
    }
}
